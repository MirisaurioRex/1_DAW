DROP TABLE CLIENTE CASCADE CONSTRAINTS;
DROP TABLE COCHE CASCADE CONSTRAINTS;
DROP TABLE CONCESIONARIO CASCADE CONSTRAINTS;
DROP TABLE DISTRIBUCION CASCADE CONSTRAINTS;
DROP TABLE VENTAS CASCADE CONSTRAINTS;
CREATE TABLE COCHE (
  codigo varchar2(20) NOT NULL,
  nombre varchar2(20),
  modelo varchar2(20) NOT NULL,
  PRIMARY KEY (codigo)
);

INSERT INTO COCHE VALUES ('BMWe86','BMW Serie 1','BMW');
INSERT INTO COCHE VALUES ('BMWe46','BMW Serie 3','BMW');
INSERT INTO COCHE VALUES ('BMWe34','BMW Serie 5','BMW');
INSERT INTO COCHE VALUES ('BMWm45','BMW Serie 7','BMW');
INSERT INTO COCHE VALUES ('BMWm87','BMW Serie 4','BMW');
INSERT INTO COCHE VALUES ('A3','AUDI A3','AUDI');
INSERT INTO COCHE VALUES ('A5','AUDI A5','AUDI');
INSERT INTO COCHE VALUES ('A6Q','AUDI A6 QUATTRO','AUDI');
INSERT INTO COCHE VALUES ('C4C','C4','CITROEN');
INSERT INTO COCHE VALUES ('C5C','C5','CITROEN');
INSERT INTO COCHE VALUES ('IBIZA','Ibiza','SEAT');
INSERT INTO COCHE VALUES ('KCEED','CEED','KIA');
INSERT INTO COCHE VALUES ('KSPORT','SPORTAGE','KIA');
INSERT INTO COCHE VALUES ('KRIO','RIO','KIA');
INSERT INTO COCHE VALUES ('NISQA','QASQAI','NISSAN');
INSERT INTO COCHE VALUES ('NISPU','PULSAR','NISSAN');



CREATE TABLE CONCESIONARIO (
  CIF varchar2(20) NOT NULL,
  nombre varchar2(20),
  ciudad varchar2(20),
  PRIMARY KEY (CIF)
);

INSERT INTO CONCESIONARIO VALUES ('44543123','Fercar','Alicante');
INSERT INTO CONCESIONARIO VALUES ('85543123','Multi Car','Alicante');
INSERT INTO CONCESIONARIO VALUES ('77323232','Motor Sport','Murcia');
INSERT INTO CONCESIONARIO VALUES ('85643123','BMW Villa de campo','Madrid');
INSERT INTO CONCESIONARIO VALUES ('76543213','Todo motor','Madrid');
INSERT INTO CONCESIONARIO VALUES ('98654678','Tope Gama','Madrid');
INSERT INTO CONCESIONARIO VALUES ('11232123','BMW Barna','Barcelona');
INSERT INTO CONCESIONARIO VALUES ('54345432','Tot Turbo','Barcelona');
INSERT INTO CONCESIONARIO VALUES ('32323232','4 rodes','Ibiza');
INSERT INTO CONCESIONARIO VALUES ('56429642','Grant Turismo','Alicante');




CREATE TABLE CLIENTE (
  DNI varchar2(20) NOT NULL,
  nombre nvarchar2(20),
  apellidos varchar2(20),
  ciudad varchar2(20),
  PRIMARY KEY (DNI)
);

INSERT INTO CLIENTE VALUES ('24583143','Alvaro','P�rez','Alicante');
INSERT INTO CLIENTE VALUES ('65344533','Silvia','Garc�a','Alicante');
INSERT INTO CLIENTE VALUES ('44545433','Abdon','Ba��n','Murcia');
INSERT INTO CLIENTE VALUES ('14123233','Raquel','P�rez','Madrid');
INSERT INTO CLIENTE VALUES ('44567676','Fulgencio','Oliver','La Romana');
INSERT INTO CLIENTE VALUES ('44599887','Javier','Romo','Madrid');
INSERT INTO CLIENTE VALUES ('44512333','Manuel','Ivorra','Madrid');
INSERT INTO CLIENTE VALUES ('67453423','Alvaro','Kamen','Madrid');
INSERT INTO CLIENTE VALUES ('87643455','Sergi','Villaplana','Alicante');
INSERT INTO CLIENTE VALUES ('76357844','Carles','Puig','Barcelona');
INSERT INTO CLIENTE VALUES ('76411111','Antoni','Punset','Ibiza');
INSERT INTO CLIENTE VALUES ('11111112','Carlos','P�rez','Valencia');
INSERT INTO CLIENTE VALUES ('22222211','Jos�','Jover','Valencia');
INSERT INTO CLIENTE VALUES ('00000031','Francisco','Esteve','Zaragoza');



CREATE TABLE DISTRIBUCION  (
  CIF_concesionario varchar2(20) NOT NULL,
  codigo_coche varchar2(20),
  cantidad decimal(4,0) NOT NULL,
  PRIMARY KEY (CIF_concesionario,codigo_coche),
  CONSTRAINT fk_DISTRIBUCION_CONCESIONARIO FOREIGN KEY (CIF_concesionario) REFERENCES CONCESIONARIO,
  CONSTRAINT fk_DISTRIBUION_COCHE FOREIGN KEY (codigo_coche) REFERENCES COCHE
);

INSERT INTO DISTRIBUCION VALUES ('44543123','BMWe86',5);
INSERT INTO DISTRIBUCION VALUES ('44543123','BMWe46',15);
INSERT INTO DISTRIBUCION VALUES ('44543123','BMWe34',4);
INSERT INTO DISTRIBUCION VALUES ('85543123','NISPU',12);
INSERT INTO DISTRIBUCION VALUES ('85543123','BMWm45',21);
INSERT INTO DISTRIBUCION VALUES ('85543123','C4C',15);
INSERT INTO DISTRIBUCION VALUES ('77323232','A3',3);
INSERT INTO DISTRIBUCION VALUES ('77323232','KRIO',1);
INSERT INTO DISTRIBUCION VALUES ('76543213','KRIO',6);
INSERT INTO DISTRIBUCION VALUES ('77323232','C4C',2);
INSERT INTO DISTRIBUCION VALUES ('85643123','A6Q',3);
INSERT INTO DISTRIBUCION VALUES ('85643123','NISPU',4);
INSERT INTO DISTRIBUCION VALUES ('85643123','BMWm45',5);
INSERT INTO DISTRIBUCION VALUES ('76543213','C4C',6);
INSERT INTO DISTRIBUCION VALUES ('76543213','KCEED',7);
INSERT INTO DISTRIBUCION VALUES ('76543213','A3',8);
INSERT INTO DISTRIBUCION VALUES ('98654678','C4C',1);
INSERT INTO DISTRIBUCION VALUES ('98654678','A6Q',6);
INSERT INTO DISTRIBUCION VALUES ('98654678','KSPORT',8);
INSERT INTO DISTRIBUCION VALUES ('11232123','NISQA',9);
INSERT INTO DISTRIBUCION VALUES ('11232123','A3',14);
INSERT INTO DISTRIBUCION VALUES ('11232123','C5C',16);
INSERT INTO DISTRIBUCION VALUES ('54345432','BMWm45',15);
INSERT INTO DISTRIBUCION VALUES ('54345432','KSPORT',15);
INSERT INTO DISTRIBUCION VALUES ('54345432','A6Q',25);
INSERT INTO DISTRIBUCION VALUES ('32323232','NISQA',1);
INSERT INTO DISTRIBUCION VALUES ('32323232','KCEED',3);
INSERT INTO DISTRIBUCION VALUES ('32323232','IBIZA',0);



CREATE TABLE VENTAS (
  CIF_concesionario varchar2(20) NOT NULL,
  DNI_cliente varchar2(20) NOT NULL,
  codigo_coche varchar2(20),
  color varchar2(20),
  
  PRIMARY KEY (CIF_concesionario, DNI_cliente,codigo_coche),
  CONSTRAINT fk_VENTAS_CONCESIONARIO FOREIGN KEY (CIF_concesionario) REFERENCES CONCESIONARIO,
  CONSTRAINT fk_VENTAS_CLIENTE FOREIGN KEY (DNI_cliente) REFERENCES CLIENTE,
  CONSTRAINT fk_VENTAS_COCHE FOREIGN KEY (codigo_coche) REFERENCES COCHE
);
ALTER TABLE VENTAS ADD (FECHA DATE);
-- COCHE inserts

INSERT INTO VENTAS VALUES ('76543213','24583143','KRIO','rojo',TO_DATE('3/06/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('76543213','11111112','KRIO','blanco',TO_DATE('23/06/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('44543123','24583143','BMWe86','rojo',TO_DATE('3/06/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('44543123','24583143','BMWe46','blanco',TO_DATE('13/05/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('44543123','65344533','BMWe34','azul',TO_DATE('23/04/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('85543123','65344533','NISPU','blanco',TO_DATE('4/03/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('85543123','44545433','NISPU','rojo',TO_DATE('5/02/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('85543123','44599887','NISPU','rojo',TO_DATE('6/01/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('85543123','14123233','C4C','blanco',TO_DATE('7/02/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('85543123','44599887','C4C','rojo',TO_DATE('13/03/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('85543123','44567676','C4C','azul',TO_DATE('23/06/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('77323232','44512333','KRIO','rojo',TO_DATE('15/06/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('77323232','67453423','KRIO','blanco',TO_DATE('15/06/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('77323232','87643455','KRIO','rojo',TO_DATE('6/07/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('77323232','76357844','C4C','azul',TO_DATE('7/08/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('85643123','76411111','A6Q','blanco',TO_DATE('8/09/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('76543213','11111112','KCEED','azul',TO_DATE('9/10/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('76543213','11111112','A3','rojo',TO_DATE('13/11/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('76543213','14123233','A3','blanco',TO_DATE('11/12/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('98654678','00000031','KSPORT','azul',TO_DATE('12/06/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('11232123','00000031','NISQA','blanco',TO_DATE('23/08/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('32323232','00000031','KCEED','rojo',TO_DATE('28/09/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('32323232','76411111','IBIZA','rojo',TO_DATE('18/09/2016', 'dd/mm/yyyy'));
INSERT INTO VENTAS VALUES ('44543123','22222211','BMWe86','rojo',TO_DATE('05/10/2016', 'dd/mm/yyyy'));

